(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6953:function(e,t,r){Promise.resolve().then(r.bind(r,6165))},6165:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var s=r(2967),n=r(3725),o=r(5413),a=r(2728);function i(e){let{children:t}=e,{isAuthenticated:r,loading:i}=(0,n.a)(),c=(0,o.useRouter)();return((0,a.useEffect)(()=>{i||r||c.push("/auth/login")},[r,i,c]),i)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):r?(0,s.jsx)(s.Fragment,{children:t}):null}function c(){let{user:e,logout:t}=(0,n.a)(),r=(0,o.useRouter)();return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,s.jsx)("nav",{className:"bg-white shadow-sm",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Dashboard"})}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("button",{onClick:()=>{t(),r.push("/auth/login")},className:"ml-4 px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Logout"})})]})})}),(0,s.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,s.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,s.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Welcome, ",(null==e?void 0:e.name)||"User","!"]}),(0,s.jsx)("div",{className:"mt-6 border-t border-gray-200 pt-6",children:(0,s.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Full name"}),(0,s.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:null==e?void 0:e.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Email address"}),(0,s.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:null==e?void 0:e.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Member since"}),(0,s.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:(null==e?void 0:e.createdAt)?new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"User ID"}),(0,s.jsx)("dd",{className:"mt-1 text-sm text-gray-900 font-mono",children:null==e?void 0:e.id})]})]})})]})}),(0,s.jsx)("div",{className:"mt-8 bg-white overflow-hidden shadow rounded-lg",children:(0,s.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,s.jsx)("button",{className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Take Personality Test"}),(0,s.jsx)("button",{className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"View Results"}),(0,s.jsx)("button",{className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Edit Profile"})]})]})})]})})]})}function l(){return(0,s.jsx)(i,{children:(0,s.jsx)(c,{})})}},3725:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return u},a:function(){return d}});var s=r(2967),n=r(2728);let o=r(2608).env.NEXT_PUBLIC_API_URL||"http://localhost:3001/api";class a{getHeaders(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={"Content-Type":"application/json"};if(e){let e=localStorage.getItem("accessToken");e&&(t.Authorization="Bearer ".concat(e))}return t}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let s=await fetch("".concat(this.baseUrl).concat(e),{...t,headers:{...this.getHeaders(r),...t.headers}}),n=await s.json();if(!s.ok)throw Error(n.message||"An error occurred");return n}catch(e){if(e instanceof Error)throw e;throw Error("An unexpected error occurred")}}async get(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.request(e,{method:"GET"},t)}async post(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.request(e,{method:"POST",body:JSON.stringify(t)},r)}async put(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.request(e,{method:"PUT",body:JSON.stringify(t)},r)}async delete(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.request(e,{method:"DELETE"},t)}constructor(e){this.baseUrl=e}}let i=new a(o),c={async register(e){let t=await i.post("/auth/register",e);if(t.data)return localStorage.setItem("accessToken",t.data.accessToken),localStorage.setItem("refreshToken",t.data.refreshToken),t.data;throw Error(t.message||"Registration failed")},async login(e){let t=await i.post("/auth/login",e);if(t.data)return localStorage.setItem("accessToken",t.data.accessToken),localStorage.setItem("refreshToken",t.data.refreshToken),t.data;throw Error(t.message||"Login failed")},async getProfile(){let e=await i.get("/auth/profile",!0);if(e.data)return e.data;throw Error(e.message||"Failed to get profile")},async updateProfile(e){let t=await i.put("/auth/profile",e,!0);if(t.data)return t.data;throw Error(t.message||"Failed to update profile")},async changePassword(e){let t=await i.post("/auth/change-password",e,!0);if(!t.success)throw Error(t.message||"Failed to change password")},logout(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")},getAccessToken:()=>localStorage.getItem("accessToken"),isAuthenticated(){return!!this.getAccessToken()}},l=(0,n.createContext)(void 0);function u(e){let{children:t}=e,[r,o]=(0,n.useState)(null),[a,i]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{try{if(c.isAuthenticated()){let e=await c.getProfile();o(e)}}catch(e){console.error("Failed to get profile:",e),c.logout()}finally{i(!1)}})()},[]);let u=async e=>{o((await c.login(e)).user)},d=async e=>{o((await c.register(e)).user)};return(0,s.jsx)(l.Provider,{value:{user:r,loading:a,login:u,register:d,logout:()=>{c.logout(),o(null)},updateUser:e=>{o(e)},isAuthenticated:!!r},children:t})}function d(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5413:function(e,t,r){"use strict";var s=r(7799);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},2608:function(e){var t,r,s,n=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c=[],l=!1,u=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):u=-1,c.length&&h())}function h(){if(!l){var e=i(d);l=!0;for(var t=c.length;t;){for(s=c,c=[];++u<t;)s&&s[u].run();u=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function f(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1!==c.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},function(e){e.O(0,[129,880,744],function(){return e(e.s=6953)}),_N_E=e.O()}]);