(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{697:function(e,t,s){Promise.resolve().then(s.bind(s,6165))},6165:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(2967),a=s(3725),n=s(5413),o=s(2728);function i(e){let{children:t}=e,{isAuthenticated:s,loading:i}=(0,a.a)(),l=(0,n.useRouter)();return((0,o.useEffect)(()=>{i||s||l.push("/auth/login")},[s,i,l]),i)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):s?(0,r.jsx)(r.Fragment,{children:t}):null}function l(){let{user:e,logout:t}=(0,a.a)(),s=(0,n.useRouter)();return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,r.jsx)("nav",{className:"bg-white shadow-sm",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Dashboard"})}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("button",{onClick:()=>{t(),s.push("/auth/login")},className:"ml-4 px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Logout"})})]})})}),(0,r.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Welcome, ",(null==e?void 0:e.name)||"User","!"]}),(0,r.jsx)("div",{className:"mt-6 border-t border-gray-200 pt-6",children:(0,r.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Full name"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:null==e?void 0:e.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Email address"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:null==e?void 0:e.email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Member since"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:(null==e?void 0:e.createdAt)?new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"User ID"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900 font-mono",children:null==e?void 0:e.id})]})]})})]})}),(0,r.jsx)("div",{className:"mt-8 bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,r.jsx)("button",{className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Take Personality Test"}),(0,r.jsx)("button",{className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"View Results"}),(0,r.jsx)("button",{className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Edit Profile"})]})]})})]})})]})}function c(){return(0,r.jsx)(i,{children:(0,r.jsx)(l,{})})}},3725:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return c},a:function(){return d}});var r=s(2967),a=s(2728);class n{getHeaders(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={"Content-Type":"application/json"};if(e){let e=localStorage.getItem("accessToken");e&&(t.Authorization="Bearer ".concat(e))}return t}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let r=await fetch("".concat(this.baseUrl).concat(e),{...t,headers:{...this.getHeaders(s),...t.headers}}),a=await r.json();if(!r.ok)throw Error(a.message||"An error occurred");return a}catch(e){if(e instanceof Error)throw e;throw Error("An unexpected error occurred")}}async get(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.request(e,{method:"GET"},t)}async post(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.request(e,{method:"POST",body:JSON.stringify(t)},s)}async put(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.request(e,{method:"PUT",body:JSON.stringify(t)},s)}async delete(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.request(e,{method:"DELETE"},t)}constructor(e){this.baseUrl=e}}let o=new n("http://localhost:3001/api"),i={async register(e){let t=await o.post("/auth/register",e);if(t.data)return localStorage.setItem("accessToken",t.data.accessToken),localStorage.setItem("refreshToken",t.data.refreshToken),t.data;throw Error(t.message||"Registration failed")},async login(e){let t=await o.post("/auth/login",e);if(t.data)return localStorage.setItem("accessToken",t.data.accessToken),localStorage.setItem("refreshToken",t.data.refreshToken),t.data;throw Error(t.message||"Login failed")},async getProfile(){let e=await o.get("/auth/profile",!0);if(e.data)return e.data;throw Error(e.message||"Failed to get profile")},async updateProfile(e){let t=await o.put("/auth/profile",e,!0);if(t.data)return t.data;throw Error(t.message||"Failed to update profile")},async changePassword(e){let t=await o.post("/auth/change-password",e,!0);if(!t.success)throw Error(t.message||"Failed to change password")},logout(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")},getAccessToken:()=>localStorage.getItem("accessToken"),isAuthenticated(){return!!this.getAccessToken()}},l=(0,a.createContext)(void 0);function c(e){let{children:t}=e,[s,n]=(0,a.useState)(null),[o,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{if(i.isAuthenticated()){let e=await i.getProfile();n(e)}}catch(e){console.error("Failed to get profile:",e),i.logout()}finally{c(!1)}})()},[]);let d=async e=>{n((await i.login(e)).user)},u=async e=>{n((await i.register(e)).user)};return(0,r.jsx)(l.Provider,{value:{user:s,loading:o,login:d,register:u,logout:()=>{i.logout(),n(null)},updateUser:e=>{n(e)},isAuthenticated:!!s},children:t})}function d(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5413:function(e,t,s){"use strict";var r=s(7799);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[129,880,744],function(){return e(e.s=697)}),_N_E=e.O()}]);